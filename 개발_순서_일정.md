# 사주 앱 개발 순서 및 일정

## 전체 개발 일정 (총 6주)

```
Week 1-2: 백엔드 + DB 구축
Week 3-4: 앱 개발 (기본 기능)
Week 5: 결제 연동 + 테스트
Week 6: 배포 준비 + 출시
```

---

## Phase 1: 환경 설정 및 DB 구축 (1주)

### Day 1-2: 개발 환경 세팅

**로컬 개발 환경**
```bash
# Node.js 프로젝트 생성
mkdir saju-app-backend
cd saju-app-backend
npm init -y
npm install express mysql2 jsonwebtoken bcryptjs dotenv cors helmet morgan

# Python 프로젝트 생성
mkdir saju-calculator
cd saju-calculator
python3 -m venv venv
source venv/bin/activate
pip install Flask flask-cors korean-lunar-calendar mysql-connector-python

# React Native 프로젝트 생성
npx create-expo-app saju-app
cd saju-app
npm install @react-navigation/native @react-navigation/stack axios
```

**Git 저장소 설정**
```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/your-repo/saju-app.git
git push -u origin main
```

### Day 3-4: 데이터베이스 구축

**MySQL 설치 및 설정**
```bash
# Ubuntu
sudo apt install mysql-server
sudo mysql_secure_installation

# 데이터베이스 생성
mysql -u root -p
CREATE DATABASE saju_app CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'sajuadmin'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON saju_app.* TO 'sajuadmin'@'localhost';
FLUSH PRIVILEGES;
```

**스키마 생성**
```bash
mysql -u sajuadmin -p saju_app < database/schema.sql
```

### Day 5-7: 만세력 데이터 생성

**Python 스크립트 실행**
```bash
cd saju-calculator
python saju_data_generator.py --start-year 1900 --end-year 2100
```

**예상 소요 시간**: 2-3시간 (200년치 데이터)

**데이터 검증**
```sql
SELECT COUNT(*) FROM manseruk;  -- 약 73,000개 (200년 × 365일)
SELECT * FROM manseruk WHERE solar_date = '2025-01-01';
```

---

## Phase 2: 백엔드 API 개발 (1주)

### Day 8-10: 인증 API

**구현 목록**
```javascript
// routes/auth.js
POST /api/auth/signup      // 회원가입
POST /api/auth/login       // 로그인
POST /api/auth/logout      // 로그아웃
GET  /api/auth/me          // 내 정보 조회
PUT  /api/auth/profile     // 프로필 수정
```

**체크리스트**
- [ ] JWT 토큰 발급
- [ ] 비밀번호 암호화 (bcrypt)
- [ ] 입력값 검증 (joi)
- [ ] 에러 핸들링

**테스트**
```bash
# Postman으로 테스트
POST http://localhost:3000/api/auth/signup
{
  "email": "test@example.com",
  "password": "password123",
  "birth_date": "1990-05-15",
  "birth_time": "14:30",
  "gender": "M"
}
```

### Day 11-12: 사주 API

**구현 목록**
```javascript
// routes/saju.js
POST /api/saju/calculate        // 사주 계산
GET  /api/saju/today           // 오늘의 운세
GET  /api/saju/monthly         // 월간 운세
POST /api/saju/reunion         // 재회 사주 (유료)
POST /api/saju/meeting         // 만남 시기 (유료)
POST /api/saju/compatibility   // 궁합 (유료)
GET  /api/saju/history         // 히스토리
```

**Python Flask 연동**
```python
# app.py
from flask import Flask, request, jsonify

@app.route('/calculate', methods=['POST'])
def calculate_saju():
    data = request.json
    birth_date = data['birth_date']
    # 사주 계산 로직
    return jsonify(result)
```

### Day 13-14: 기타 API + 테스트

**구현 목록**
- 알림 API
- 히스토리 API
- 통합 테스트

---

## Phase 3: 앱 개발 - 기본 기능 (2주)

### Day 15-17: 앱 기본 구조

**네비게이션 설정**
```javascript
// navigation/AppNavigator.js
- AuthStack (로그인, 회원가입)
- MainStack
  - BottomTabNavigator
    - HomeScreen
    - SajuScreen
    - HistoryScreen
    - MyPageScreen
```

**상태 관리 (Redux)**
```javascript
// store/slices/
- authSlice.js      // 인증 상태
- sajuSlice.js      // 사주 데이터
- uiSlice.js        // UI 상태
```

**API 연동 설정**
```javascript
// api/client.js
import axios from 'axios';

const client = axios.create({
  baseURL: 'http://localhost:3000/api',
  timeout: 10000,
});

// 인터셉터 설정 (토큰 자동 추가)
client.interceptors.request.use(config => {
  const token = getToken();
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});
```

### Day 18-20: 인증 화면

**구현 화면**
1. **스플래시 화면**
```javascript
// screens/SplashScreen.js
- 2초 후 자동 이동
- 로그인 여부 확인
```

2. **온보딩 화면**
```javascript
// screens/OnboardingScreen.js
- react-native-app-intro-slider 사용
- 3개 슬라이드
- AsyncStorage에 '본 적 있음' 저장
```

3. **로그인/회원가입**
```javascript
// screens/LoginScreen.js
// screens/SignupScreen.js
- 이메일/비밀번호 입력
- 유효성 검사
- API 호출
- 토큰 저장
```

### Day 21-24: 메인 화면들

**1. 홈 화면 (HomeScreen.js)**
```javascript
구현 요소:
- 상단: 사용자 이름, 알림 아이콘
- 오늘의 운세 카드 (API: /api/saju/today)
- 빠른 메뉴 그리드 (4개)
- 프로모션 배너
```

**2. 사주풀이 화면 (SajuScreen.js)**
```javascript
구현 요소:
- 내 사주 표시 (년월일시주)
- 반합/원진 표시
- 분석 메뉴 버튼들
```

**3. 히스토리 화면 (HistoryScreen.js)**
```javascript
구현 요소:
- FlatList로 리스트 표시
- 필터 기능
- 각 항목 클릭 시 상세 화면
```

**4. 마이페이지 (MyPageScreen.js)**
```javascript
구현 요소:
- 프로필 정보
- 구매 내역
- 설정 메뉴
- 로그아웃
```

### Day 25-28: 유료 기능 화면

**1. 재회 사주 화면**
```javascript
// screens/ReunionScreen.js
- 서비스 설명
- 결제 전/후 분기
- 결과 표시 (차트, 텍스트)
```

**2. 만남 시기 화면**
```javascript
// screens/MeetingScreen.js
- 월별 타임라인 (차트)
- 인연 정보
- 조언 텍스트
```

**3. 궁합 화면**
```javascript
// screens/CompatibilityScreen.js
- 상대방 정보 입력 폼
- 궁합 점수 원형 차트
- 상세 분석
```

---

## Phase 4: 결제 연동 (1주)

### Day 29-31: 토스페이먼츠 연동

**SDK 설치**
```bash
npm install @tosspayments/payment-sdk-react-native
```

**결제 흐름 구현**
```javascript
// screens/PaymentScreen.js

1. 상품 선택 (재회 사주 990원)
2. 결제 수단 선택
3. 토스페이먼츠 SDK 호출
4. 결제 완료 후 백엔드로 검증 요청
5. 백엔드에서 결제 확인 후 콘텐츠 제공
```

**백엔드 결제 검증 API**
```javascript
// routes/payment.js
POST /api/payment/verify     // 결제 검증
GET  /api/payment/history    // 구매 내역
POST /api/payment/refund     // 환불 (관리자용)
```

**토스페이먼츠 테스트**
```bash
# 테스트 키로 개발
# 실제 결제는 하지 않고 시뮬레이션
```

### Day 32-33: 결제 플로우 완성

**구현**
- 결제 완료 화면
- 영수증 화면
- 구매 내역 연동
- 에러 처리 (결제 실패, 취소 등)

### Day 34-35: 통합 테스트

**테스트 시나리오**
1. 회원가입 → 로그인 → 홈
2. 오늘의 운세 확인 (무료)
3. 재회 사주 결제 → 결과 확인
4. 히스토리에 저장되는지 확인
5. 로그아웃 → 재로그인 → 데이터 유지 확인

---

## Phase 5: 서버 배포 (3일)

### Day 36: AWS 서버 설정

**Lightsail 인스턴스 생성**
```bash
# 1. Lightsail에서 Ubuntu 22.04 선택
# 2. SSH 키 다운로드
# 3. 인스턴스 접속
ssh -i your-key.pem ubuntu@your-ip
```

**서버 환경 설정**
```bash
# 업데이트
sudo apt update && sudo apt upgrade -y

# Node.js 설치
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# MySQL 설치
sudo apt install mysql-server -y

# Python 설치
sudo apt install python3 python3-pip python3-venv -y

# Nginx 설치
sudo apt install nginx -y

# PM2 설치
sudo npm install -g pm2
```

### Day 37: 코드 배포

**백엔드 배포**
```bash
# 코드 클론
git clone https://github.com/your-repo/saju-app-backend.git
cd saju-app-backend

# 의존성 설치
npm install

# 환경 변수 설정
nano .env
# DB_HOST=localhost
# DB_USER=sajuadmin
# DB_PASSWORD=your_password
# JWT_SECRET=your_secret

# PM2로 실행
pm2 start server.js --name saju-api
pm2 startup
pm2 save
```

**Python Flask 배포**
```bash
cd saju-calculator
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# Gunicorn 설치 및 실행
pip install gunicorn
pm2 start "gunicorn -w 4 -b 0.0.0.0:5000 app:app" --name saju-calculator
```

**Nginx 설정**
```nginx
# /etc/nginx/sites-available/saju-api
server {
    listen 80;
    server_name your-domain.com;

    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

```bash
sudo ln -s /etc/nginx/sites-available/saju-api /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

**SSL 인증서 설치**
```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d your-domain.com
```

### Day 38: 데이터베이스 마이그레이션

```bash
# 로컬 DB 백업
mysqldump -u root -p saju_app > saju_backup.sql

# 서버로 전송
scp saju_backup.sql ubuntu@your-ip:~/

# 서버에서 복원
mysql -u sajuadmin -p saju_app < saju_backup.sql
```

---

## Phase 6: 앱 배포 및 출시 (1주)

### Day 39-40: 앱 빌드

**iOS (TestFlight)**
```bash
# Expo 빌드
eas build --platform ios

# 또는 직접 빌드
cd ios
pod install
xcodebuild -workspace SajuApp.xcworkspace -scheme SajuApp archive
```

**Android**
```bash
# Expo 빌드
eas build --platform android

# 또는 직접 빌드
cd android
./gradlew assembleRelease
```

### Day 41-42: 스토어 등록

**App Store (iOS)**
1. Apple Developer 계정 생성 ($99/년)
2. App Store Connect에서 앱 등록
3. 앱 정보 입력
   - 이름: "재회사주 - 만세력 기반 사주풀이"
   - 설명, 스크린샷, 키워드
4. 빌드 업로드
5. 심사 제출

**Google Play (Android)**
1. Google Play Console 계정 ($25 1회)
2. 앱 등록
3. 앱 정보 입력
4. APK/AAB 업로드
5. 출시

### Day 43: 최종 테스트

**체크리스트**
- [ ] 회원가입/로그인 정상 작동
- [ ] 모든 API 호출 성공
- [ ] 결제 테스트 (실제 소액)
- [ ] 푸시 알림 테스트
- [ ] iOS/Android 모두 테스트
- [ ] 다양한 기기 테스트

### Day 44-45: 소프트 론칭

**베타 테스터 모집**
- 지인 10-20명
- 피드백 수집
- 버그 수정

---

## 마케팅 준비 (별도)

### 필요한 자료
1. **앱 스토어 자료**
   - 아이콘 (1024x1024)
   - 스크린샷 (5-10개)
   - 앱 설명 (한국어/영어)
   - 키워드

2. **인스타그램 콘텐츠**
   - 앱 소개 포스트
   - 기능 시연 릴스
   - 사용자 후기

3. **인플루언서 협업 자료**
   - 앱 소개서 (PDF)
   - 홍보 문구 샘플
   - 할인 코드 생성 기능

---

## 개발 팁

### 시간 절약 방법
1. **템플릿 활용**
   - React Native UI 라이브러리 (React Native Paper)
   - 사주 계산은 검증된 라이브러리 사용

2. **우선순위**
   - MVP 먼저 완성 (무료 기능 + 재회 사주 1개)
   - 나머지는 점진적 추가

3. **병렬 작업**
   - 백엔드 개발하면서 앱 UI는 목 데이터로 개발
   - 디자인과 개발 동시 진행

### 주의사항
1. **보안**
   - API 키는 환경 변수로
   - 민감한 정보 절대 Git에 커밋 금지
   - .gitignore 제대로 설정

2. **에러 처리**
   - 모든 API 호출에 try-catch
   - 사용자 친화적인 에러 메시지

3. **성능**
   - 이미지 최적화
   - API 응답 캐싱
   - 불필요한 재렌더링 방지

---

## 예상 소요 시간 (하루 4시간 기준)

| 단계 | 기간 | 누적 |
|------|------|------|
| 환경 설정 + DB | 7일 | 7일 |
| 백엔드 API | 7일 | 14일 |
| 앱 개발 | 14일 | 28일 |
| 결제 연동 | 7일 | 35일 |
| 배포 | 7일 | 42일 |
| **총계** | **6주** | **42일** |

---

## 출시 후 로드맵

### 1개월 후
- 사용자 피드백 반영
- 버그 수정
- 추가 기능 (월간 구독)

### 3개월 후
- AI 챗봇 추가 (선택)
- 커뮤니티 기능
- 타로 카드 기능 (확장)

### 6개월 후
- 웹 버전 출시
- 해외 진출 (영어 번역)

---

## 성공을 위한 체크포인트

✅ Week 1 끝: DB 구축 완료, 만세력 데이터 생성 완료  
✅ Week 2 끝: 모든 API 엔드포인트 작동  
✅ Week 4 끝: 앱 기본 기능 완성, 로컬 테스트 성공  
✅ Week 5 끝: 결제까지 전체 플로우 작동  
✅ Week 6 끝: 서버 배포, 앱 스토어 제출  

각 체크포인트마다 멈춰서 검증하고 넘어가세요!
